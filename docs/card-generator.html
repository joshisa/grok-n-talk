<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grok-N-Talk Card Generator</title>
    
    <!-- CodeMirror 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/material.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/addon/edit/closetag.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/addon/edit/matchtags.min.js"></script>
    
    <!-- JS Beautify for HTML formatting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.11/beautify-html.min.js"></script>
    
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #1a1a1a;
            color: #e8eef5;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #B3D0F5;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #9fb3c8;
            margin-bottom: 30px;
        }

        .generator-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 1024px) {
            .generator-layout {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: #121823;
            border: 1px solid #223041;
            border-radius: 12px;
            padding: 20px;
        }

        /* Make preview panel sticky */
        .generator-layout > .panel:last-child {
            position: sticky;
            top: 20px;
            align-self: start;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }

        .panel h2 {
            margin-top: 0;
            color: #B3D0F5;
            font-size: 20px;
            border-bottom: 2px solid #223041;
            padding-bottom: 10px;
        }

        .form-section {
            margin-bottom: 25px;
        }

        .form-section h3 {
            color: #FFC294;
            font-size: 16px;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #9fb3c8;
            font-size: 14px;
        }

        input[type="text"],
        input[type="url"],
        input[type="color"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 8px 12px;
            background: #0b0f14;
            border: 1px solid #223041;
            border-radius: 6px;
            color: #e8eef5;
            font-size: 14px;
            font-family: inherit;
        }

        input[type="text"]:focus,
        input[type="url"]:focus,
        input[type="color"]:focus,
        input[type="number"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #3ba0ff;
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        /* CodeMirror Customization */
        .CodeMirror {
            height: auto;
            min-height: 120px;
            max-height: 400px;
            border: 1px solid #223041;
            border-radius: 6px;
            background: #0b0f14;
            font-size: 13px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
        }

        .CodeMirror-scroll {
            min-height: 120px;
            max-height: 400px;
        }

        .CodeMirror-gutters {
            background: #0b0f14;
            border-right: 1px solid #223041;
        }

        .CodeMirror-linenumber {
            color: #5a6b7d;
        }

        .CodeMirror-cursor {
            border-left: 2px solid #3ba0ff;
        }

        .CodeMirror-selected {
            background: #223041 !important;
        }

        .CodeMirror-focused .CodeMirror-selected {
            background: #2d3d52 !important;
        }

        /* HTML Editor Toolbar */
        .editor-toolbar {
            display: flex;
            gap: 4px;
            margin-bottom: 8px;
            padding: 8px;
            background: #0b0f14;
            border: 1px solid #223041;
            border-radius: 6px 6px 0 0;
            flex-wrap: wrap;
        }

        .editor-toolbar button {
            padding: 6px 10px;
            font-size: 12px;
            background: #223041;
            color: #9fb3c8;
            border: 1px solid #2d3d52;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .editor-toolbar button:hover {
            background: #2d3d52;
            color: #e8eef5;
            border-color: #3ba0ff;
        }

        .editor-toolbar button:active {
            transform: scale(0.95);
        }

        .editor-toolbar .separator {
            width: 1px;
            background: #223041;
            margin: 0 4px;
        }

        .editor-container {
            position: relative;
        }

        .editor-container .CodeMirror {
            border-radius: 0 0 6px 6px;
            border-top: none;
        }

        /* Validation Messages */
        .validation-message {
            margin-top: 5px;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            display: none;
        }

        .validation-message.error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #fca5a5;
            display: block;
        }

        .validation-message.success {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: #86efac;
            display: block;
        }

        input[type="checkbox"] {
            margin-right: 8px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .checkbox-group label {
            margin-bottom: 0;
            cursor: pointer;
        }

        button {
            background: #3ba0ff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background: #2e8fd9;
        }

        button:active {
            transform: scale(0.98);
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .button-secondary {
            background: #223041;
        }

        .button-secondary:hover {
            background: #2d3d52;
        }

        /* Preview Panel Styles */
        .preview-container {
            perspective: 1500px;
            min-height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card {
            text-align: left;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
            font-family: Arial, Sans-Serif;
            width: 400px;
            height: 600px;
            color: white;
            margin: 0 auto;
        }

        .card.flip {
            transform: rotateY(180deg);
        }

        .card .face {
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            backface-visibility: hidden;
            transform: translateZ(0.1px);
            border-radius: 10px;
        }

        .card .front {
            background-color: #101010;
            color: #ffffff;
            background-size: 100%;
            background-position: 50% 50%;
            background-repeat: no-repeat;
        }

        .card .back {
            transform: rotateY(180deg);
            font-size: 16px;
            line-height: 1.3em;
            background: #003566;
            color: #FFFFFF;
            padding: 5px;
            overflow-y: auto;
        }

        .card .front .logo {
            width: 200px;
            padding: 10px;
        }

        .card h2 {
            text-transform: uppercase;
            font-size: 48px;
            position: absolute;
            bottom: 70px;
            margin: 0;
            line-height: 0.75em;
            padding: 10px;
        }

        .card h2 small {
            font-size: 28px;
        }

        .card .back img {
            width: 100%;
            max-width: 100%;
            height: auto;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
        }

        .card .back .description {
            padding: 5px;
        }

        .card .back .summary,
        .card .back .competitors,
        .card .back .x-sell,
        .card .back .upsell,
        .card .back .questions,
        .card .back .story,
        .card .back .talk,
        .card .back .tv {
            padding: 5px;
            display: none;
        }

        .center {
            text-align: center;
        }

        .card .back a:link,
        .card .back a:visited {
            color: #B3D0F5;
        }

        .card .back a:hover {
            color: #e8eef5;
        }

        .emphasize {
            font-weight: bold;
            color: #FFC294;
        }

        /* Link icon styling */
        .card .back a[href^='http']:after {
            content: " \1F517 ";
            text-decoration: none;
            display: inline-block;
            position: relative;
            left: 5px;
            padding-right: 5px;
        }

        .card .back a[href^='http'].offline:after {
            background-image: url(data:image/png;base64,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);
            background-size: 20px 20px;
            display: inline-block;
            width: 20px;
            height: 20px;
            content: "";
            vertical-align: top;
            padding-left: 5px;
            background-repeat: no-repeat;
            position: relative;
            left: 5px;
        }

        /* Toggle button positioning classes */
        .card .back .summary-toggle {
            position: fixed;
            bottom: 15px;
            left: 5px;
        }

        .card .back .compete-toggle {
            position: fixed;
            bottom: 15px;
            left: 55px;
        }

        .card .back .x-toggle {
            position: fixed;
            bottom: 15px;
            left: 105px;
        }

        .card .back .upsell-toggle {
            position: fixed;
            bottom: 15px;
            left: 160px;
        }

        .card .back .story-toggle {
            position: fixed;
            bottom: 15px;
            left: 215px;
        }

        .card .back .call-toggle {
            position: fixed;
            bottom: 15px;
            left: 270px;
        }

        .card .back .watch-toggle {
            position: absolute;
            bottom: 0px;
            right: 5px;
        }

        .card .back .toggle {
            height: 40px;
            width: 40px;
            cursor: pointer;
            transition: transform 0.2s;
            border-radius: 4px;
            border-bottom: 3px solid #000000;
        }

        .card .back .toggle:hover {
            transform: scale(1.1);
        }

        .card .back .summary-toggle.active,
        .card .back .compete-toggle.active,
        .card .back .x-toggle.active,
        .card .back .upsell-toggle.active,
        .card .back .story-toggle.active,
        .card .back .call-toggle.active {
            background-color: #000814;
        }

        .card .back .logo {
            width: 80px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .card .back .logo:hover {
            transform: scale(1.05);
        }

        /* Output Panel */
        .output-panel {
            background: #121823;
            border: 1px solid #223041;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .output-panel h2 {
            color: #B3D0F5;
            margin-top: 0;
        }

        #htmlOutput {
            width: 100%;
            min-height: 300px;
            background: #0b0f14;
            border: 1px solid #223041;
            border-radius: 6px;
            color: #e8eef5;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            padding: 15px;
            white-space: pre;
            overflow-x: auto;
        }

        .success-message {
            background: #2ecc71;
            color: white;
            padding: 10px 15px;
            border-radius: 6px;
            margin-top: 10px;
            display: none;
        }

        .flip-hint {
            text-align: center;
            color: #9fb3c8;
            font-size: 14px;
            margin-top: 10px;
        }

        .color-input-group {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 10px;
            align-items: end;
        }

        input[type="color"] {
            width: 60px;
            height: 38px;
            padding: 2px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé¥ Grok-N-Talk Card Generator</h1>
        <p class="subtitle">Create custom flip cards for your Grok-N-Talk collection</p>

        <div class="generator-layout">
            <!-- Configuration Panel -->
            <div class="panel">
                <h2>‚öôÔ∏è Card Configuration</h2>
                
                <!-- Action Buttons -->
                <div class="button-group" style="margin-bottom: 20px;">
                    <button onclick="generateHTML()">üî® Generate HTML</button>
                    <button class="button-secondary" onclick="loadExampleCard()">üìã Load Example (Turbonomic)</button>
                    <button class="button-secondary" onclick="resetForm()">üîÑ Reset</button>
                </div>
                
                <!-- Basic Settings -->
                <div class="form-section">
                    <h3>Basic Settings</h3>
                    <div class="form-group">
                        <label for="cardClass">Card CSS Class Name</label>
                        <input type="text" id="cardClass" placeholder="e.g., turbo, instana, custom-card" value="custom-card">
                    </div>
                </div>

                <!-- Front Face -->
                <div class="form-section">
                    <h3>Front Face</h3>
                    <div class="form-group">
                        <label for="logoUrl">Logo Image URL</label>
                        <input type="url" id="logoUrl" placeholder="images/logo.png" value="images/grok-n-talk-logo.png">
                    </div>
                    <div class="form-group">
                        <label for="subtitle">Subtitle (optional)</label>
                        <input type="text" id="subtitle" placeholder="e.g., IBM" value="IBM">
                    </div>
                    <div class="form-group">
                        <label for="title">Main Title</label>
                        <input type="text" id="title" placeholder="e.g., Product Name" value="Custom Product">
                    </div>
                    <div class="form-group">
                        <label for="frontBgImage">Background Image URL (optional)</label>
                        <input type="url" id="frontBgImage" placeholder="images/product-front.png">
                    </div>
                    <div class="form-group">
                        <label for="frontBgColor">Background Color</label>
                        <div class="color-input-group">
                            <input type="text" id="frontBgColor" value="#101010">
                            <input type="color" id="frontBgColorPicker" value="#101010">
                        </div>
                    </div>
                </div>

                <!-- Back Face -->
                <div class="form-section">
                    <h3>Back Face</h3>
                    <div class="form-group">
                        <label for="bannerUrl">Banner Image URL</label>
                        <input type="url" id="bannerUrl" placeholder="images/banner.png" value="images/grok-n-talk-banner.png">
                    </div>
                    <div class="form-group">
                        <label for="bannerAlt">Banner Alt Text</label>
                        <input type="text" id="bannerAlt" placeholder="Product Name" value="Custom Product">
                    </div>
                    <div class="form-group">
                        <label for="description">Description Content</label>
                        <textarea id="description" placeholder="Enter the main description content...">
<ul>
    <li>Key feature or benefit 1</li>
    <li>Key feature or benefit 2</li>
    <li>Key feature or benefit 3</li>
</ul></textarea>
                    </div>
                    <div class="form-group">
                        <label for="callToAction">Call-to-Action Question (optional)</label>
                        <input type="text" id="callToAction" placeholder="e.g., How are you currently managing...?" value="What questions do you have about this product?">
                        <small style="display: block; margin-top: 5px; color: #9fb3c8; font-size: 12px;">
                            This will appear at the end of the description with "‚Üí Gimme More ?'s" link.<br/>
                            The link will show the <strong>Questions Content</strong> section (configured below in Toggle Content Sections).
                        </small>
                    </div>
                    <div class="form-group">
                        <label for="backBgColor">Background Color</label>
                        <div class="color-input-group">
                            <input type="text" id="backBgColor" value="#003566">
                            <input type="color" id="backBgColorPicker" value="#003566">
                        </div>
                    </div>
                </div>

                <!-- Toggle Content Sections -->
                <div class="form-section">
                    <h3>Toggle Content Sections</h3>
                    <p style="font-size: 12px; color: #9fb3c8; margin-top: 0;">Content for each toggle button. Leave empty to exclude that section.</p>
                    
                    <div class="form-group">
                        <label>Summary/ELI5 Content (5 Required Bullets)</label>
                        <small style="display: block; margin-bottom: 10px; color: #9fb3c8; font-size: 12px;">
                            Each bullet should be ~100-150 characters for optimal display
                        </small>
                        <input type="text" id="eli5Assertion" placeholder="ELI5 Assertion (e.g., Applications need resources...)" maxlength="150" style="margin-bottom: 8px;">
                        <input type="text" id="eli5PainPoint" placeholder="ELI5 Customer Pain Point (e.g., Hard to find right size...)" maxlength="150" style="margin-bottom: 8px;">
                        <input type="text" id="eli5Value" placeholder="ELI5 Customer Value (e.g., Automatic resource adjustment...)" maxlength="150" style="margin-bottom: 8px;">
                        <input type="text" id="eli5Punchline" placeholder="ELI5 Product Punchline Value (e.g., Product watches and tunes...)" maxlength="150" style="margin-bottom: 8px;">
                        <input type="text" id="eli5Question" placeholder="ELI5 Initial CTA Provocation Question" maxlength="150">
                    </div>
                    
                    <div class="form-group">
                        <label for="competitorsContent">Competitors Content</label>
                        <div class="editor-toolbar" id="toolbar-competitorsContent">
                            <button type="button" onclick='insertTag("competitorsContent", "<ul>\n    <li></li>\n</ul>", 9)' title="Add List">üìù List</button>
                            <button type="button" onclick='insertTag("competitorsContent", "<li></li>", 4)' title="Add List Item">‚Ä¢ Item</button>
                            <button type="button" onclick='insertLink("competitorsContent")' title="Add Link">üîó Link</button>
                            <button type="button" onclick='insertTag("competitorsContent", "<h3 class=\"center\"></h3>", 18)' title="Add Heading">üìå Heading</button>
                            <button type="button" onclick='wrapSelection("competitorsContent", "<span class=\"emphasize\">", "</span>")' title="Emphasize">‚ú® Emphasize</button>
                            <button type="button" onclick='insertTag("competitorsContent", "<small></small>", 7)' title="Add Small Text">üî§ Small</button>
                            <div class="separator"></div>
                            <button type="button" onclick='formatHTML("competitorsContent")' title="Format HTML">üé® Format</button>
                            <button type="button" onclick='validateHTML("competitorsContent")' title="Validate HTML">‚úì Validate</button>
                        </div>
                        <div class="editor-container">
                            <textarea id="competitorsContent" placeholder="List competitors and their key differentiators..." rows="4"></textarea>
                        </div>
                        <div class="validation-message" id="validation-competitorsContent"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="xsellContent">Cross-Sell Content</label>
                        <div class="editor-toolbar" id="toolbar-xsellContent">
                            <button type="button" onclick='insertTag("xsellContent", "<ul>\n    <li></li>\n</ul>", 9)' title="Add List">üìù List</button>
                            <button type="button" onclick='insertTag("xsellContent", "<li></li>", 4)' title="Add List Item">‚Ä¢ Item</button>
                            <button type="button" onclick='insertLink("xsellContent")' title="Add Link">üîó Link</button>
                            <button type="button" onclick='insertTag("xsellContent", "<h3 class=\"center\"></h3>", 18)' title="Add Heading">üìå Heading</button>
                            <button type="button" onclick='wrapSelection("xsellContent", "<span class=\"emphasize\">", "</span>")' title="Emphasize">‚ú® Emphasize</button>
                            <button type="button" onclick='insertTag("xsellContent", "<small></small>", 7)' title="Add Small Text">üî§ Small</button>
                            <div class="separator"></div>
                            <button type="button" onclick='formatHTML("xsellContent")' title="Format HTML">üé® Format</button>
                            <button type="button" onclick='validateHTML("xsellContent")' title="Validate HTML">‚úì Validate</button>
                        </div>
                        <div class="editor-container">
                            <textarea id="xsellContent" placeholder="Products that work well together..." rows="4"></textarea>
                        </div>
                        <div class="validation-message" id="validation-xsellContent"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="upsellContent">Upsell Content</label>
                        <div class="editor-toolbar" id="toolbar-upsellContent">
                            <button type="button" onclick='insertTag("upsellContent", "<ul>\n    <li></li>\n</ul>", 9)' title="Add List">üìù List</button>
                            <button type="button" onclick='insertTag("upsellContent", "<li></li>", 4)' title="Add List Item">‚Ä¢ Item</button>
                            <button type="button" onclick='insertLink("upsellContent")' title="Add Link">üîó Link</button>
                            <button type="button" onclick='insertTag("upsellContent", "<h3 class=\"center\"></h3>", 18)' title="Add Heading">üìå Heading</button>
                            <button type="button" onclick='wrapSelection("upsellContent", "<span class=\"emphasize\">", "</span>")' title="Emphasize">‚ú® Emphasize</button>
                            <button type="button" onclick='insertTag("upsellContent", "<small></small>", 7)' title="Add Small Text">üî§ Small</button>
                            <div class="separator"></div>
                            <button type="button" onclick='formatHTML("upsellContent")' title="Format HTML">üé® Format</button>
                            <button type="button" onclick='validateHTML("upsellContent")' title="Validate HTML">‚úì Validate</button>
                        </div>
                        <div class="editor-container">
                            <textarea id="upsellContent" placeholder="Upgrade opportunities..." rows="4"></textarea>
                        </div>
                        <div class="validation-message" id="validation-upsellContent"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="questionsContent">Discovery Questions Content</label>
                        <div class="editor-toolbar" id="toolbar-questionsContent">
                            <button type="button" onclick='insertTag("questionsContent", "<ul>\n    <li></li>\n</ul>", 9)' title="Add List">üìù List</button>
                            <button type="button" onclick='insertTag("questionsContent", "<li></li>", 4)' title="Add List Item">‚Ä¢ Item</button>
                            <button type="button" onclick='insertLink("questionsContent")' title="Add Link">üîó Link</button>
                            <button type="button" onclick='insertTag("questionsContent", "<h3 class=\"center\"></h3>", 18)' title="Add Heading">üìå Heading</button>
                            <button type="button" onclick='wrapSelection("questionsContent", "<span class=\"emphasize\">", "</span>")' title="Emphasize">‚ú® Emphasize</button>
                            <button type="button" onclick='insertTag("questionsContent", "<small></small>", 7)' title="Add Small Text">üî§ Small</button>
                            <div class="separator"></div>
                            <button type="button" onclick='formatHTML("questionsContent")' title="Format HTML">üé® Format</button>
                            <button type="button" onclick='validateHTML("questionsContent")' title="Validate HTML">‚úì Validate</button>
                        </div>
                        <div class="editor-container">
                            <textarea id="questionsContent" placeholder="Questions to ask prospects..." rows="4"></textarea>
                        </div>
                        <div class="validation-message" id="validation-questionsContent"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="storyContent">Customer Stories Content</label>
                        <div class="editor-toolbar" id="toolbar-storyContent">
                            <button type="button" onclick='insertTag("storyContent", "<ul>\n    <li></li>\n</ul>", 9)' title="Add List">üìù List</button>
                            <button type="button" onclick='insertTag("storyContent", "<li></li>", 4)' title="Add List Item">‚Ä¢ Item</button>
                            <button type="button" onclick='insertLink("storyContent")' title="Add Link">üîó Link</button>
                            <button type="button" onclick='insertTag("storyContent", "<h3 class=\"center\"></h3>", 18)' title="Add Heading">üìå Heading</button>
                            <button type="button" onclick='wrapSelection("storyContent", "<span class=\"emphasize\">", "</span>")' title="Emphasize">‚ú® Emphasize</button>
                            <button type="button" onclick='insertTag("storyContent", "<small></small>", 7)' title="Add Small Text">üî§ Small</button>
                            <div class="separator"></div>
                            <button type="button" onclick='formatHTML("storyContent")' title="Format HTML">üé® Format</button>
                            <button type="button" onclick='validateHTML("storyContent")' title="Validate HTML">‚úì Validate</button>
                        </div>
                        <div class="editor-container">
                            <textarea id="storyContent" placeholder="Success stories and case studies..." rows="4"></textarea>
                        </div>
                        <div class="validation-message" id="validation-storyContent"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="loveContent">Customer Love Reasons</label>
                        <div class="editor-toolbar" id="toolbar-loveContent">
                            <button type="button" onclick='insertTag("loveContent", "<ul>\n    <li></li>\n</ul>", 9)' title="Add List">üìù List</button>
                            <button type="button" onclick='insertTag("loveContent", "<li></li>", 4)' title="Add List Item">‚Ä¢ Item</button>
                            <button type="button" onclick='insertLink("loveContent")' title="Add Link">üîó Link</button>
                            <button type="button" onclick='insertTag("loveContent", "<h3 class=\"center\"></h3>", 18)' title="Add Heading">üìå Heading</button>
                            <button type="button" onclick='wrapSelection("loveContent", "<span class=\"emphasize\">", "</span>")' title="Emphasize">‚ú® Emphasize</button>
                            <button type="button" onclick='insertTag("loveContent", "<small></small>", 7)' title="Add Small Text">üî§ Small</button>
                            <div class="separator"></div>
                            <button type="button" onclick='formatHTML("loveContent")' title="Format HTML">üé® Format</button>
                            <button type="button" onclick='validateHTML("loveContent")' title="Validate HTML">‚úì Validate</button>
                        </div>
                        <div class="editor-container">
                            <textarea id="loveContent" placeholder="Why customers love this product..." rows="4"></textarea>
                        </div>
                        <div class="validation-message" id="validation-loveContent"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="videoUrl">Video Embed URL (YouTube)</label>
                        <input type="url" id="videoUrl" placeholder="https://www.youtube.com/embed/...">
                        <small style="display: block; margin-top: 5px; color: #9fb3c8; font-size: 12px;">
                            Use YouTube embed URL format
                        </small>
                    </div>
                </div>

                <!-- Toggle Button Icons -->
                <div class="form-section">
                    <h3>Toggle Button Icons</h3>
                    <p style="font-size: 12px; color: #9fb3c8; margin-top: 0;">Icon URLs for toggle buttons. Leave empty to use defaults.</p>
                    
                    <div class="form-group">
                        <label for="toggleSummary">Summary/ELI5 Icon URL</label>
                        <input type="url" id="toggleSummary" placeholder="images/list-eli5.png" value="images/list-eli5.png">
                    </div>
                    <div class="form-group">
                        <label for="toggleCompete">Competitors Icon URL</label>
                        <input type="url" id="toggleCompete" placeholder="images/list-compete.png" value="images/list-compete.png">
                    </div>
                    <div class="form-group">
                        <label for="toggleXsell">Cross-Sell Icon URL</label>
                        <input type="url" id="toggleXsell" placeholder="images/list-cross-sell.png" value="images/list-cross-sell.png">
                    </div>
                    <div class="form-group">
                        <label for="toggleUpsell">Upsell Icon URL</label>
                        <input type="url" id="toggleUpsell" placeholder="images/list-upsell.png" value="images/list-upsell.png">
                    </div>
                    <div class="form-group">
                        <label for="toggleStory">Stories Icon URL</label>
                        <input type="url" id="toggleStory" placeholder="images/list-story.png" value="images/list-story.png">
                    </div>
                    <div class="form-group">
                        <label for="toggleLove">Customer Love Icon URL</label>
                        <input type="url" id="toggleLove" placeholder="images/list-love.png" value="images/list-love.png">
                    </div>
                    <div class="form-group">
                        <label for="toggleWatch">Watch Explainer Icon URL</label>
                        <input type="url" id="toggleWatch" placeholder="images/product-tv.png" value="images/empty-tv.png">
                        <small style="display: block; margin-top: 5px; color: #9fb3c8; font-size: 12px;">
                            This icon appears at bottom right (larger, 80px). Always visible when set.
                        </small>
                    </div>
                </div>
            </div>

            <!-- Preview Panel -->
            <div class="panel">
                <h2>üëÅÔ∏è Live Preview</h2>
                <div class="preview-container">
                    <div class="card" id="previewCard">
                        <div class="face front" id="previewFront">
                            <img class="logo" id="previewLogo" src="images/grok-n-talk-logo.png" alt="Logo">
                            <h2 id="previewTitle"><small id="previewSubtitle">IBM</small><br/>Custom Product</h2>
                        </div>
                        <div class="face back" id="previewBack">
                            <img id="previewBanner" src="images/grok-n-talk-banner.png" alt="Custom Product">
                            <div class="description" id="previewDescription">
                                <ul>
                                    <li>Key feature or benefit 1</li>
                                    <li>Key feature or benefit 2</li>
                                    <li>Key feature or benefit 3</li>
                                </ul>
                            </div>
                            <!-- Content sections (hidden by default) -->
                            <div class="summary" id="previewSummary" style="display: none;"></div>
                            <div class="competitors" id="previewCompetitors" style="display: none;"></div>
                            <div class="x-sell" id="previewXsell" style="display: none;"></div>
                            <div class="upsell" id="previewUpsell" style="display: none;"></div>
                            <div class="questions" id="previewQuestions" style="display: none;"></div>
                            <div class="story" id="previewStory" style="display: none;"></div>
                            <div class="talk" id="previewLove" style="display: none;"></div>
                            <div class="tv" id="previewTv" style="display: none;"></div>
                            <!-- Toggle buttons (individual divs, not wrapped) -->
                            <div class="summary-toggle" id="previewToggleSummary"></div>
                            <div class="compete-toggle" id="previewToggleCompete"></div>
                            <div class="x-toggle" id="previewToggleXsell"></div>
                            <div class="upsell-toggle" id="previewToggleUpsell"></div>
                            <div class="story-toggle" id="previewToggleStory"></div>
                            <div class="call-toggle" id="previewToggleLove"></div>
                            <div class="watch-toggle" id="previewToggleWatch"></div>
                        </div>
                    </div>
                </div>
                <p class="flip-hint">üí° Click the card to flip it</p>
            </div>
        </div>

        <!-- Output Panel -->
        <div class="output-panel">
            <h2>üìã Generated HTML</h2>
            <div class="button-group">
                <button onclick="copyToClipboard()">üìÑ Copy to Clipboard</button>
            </div>
            <div id="successMessage" class="success-message">‚úì Copied to clipboard!</div>
            <textarea id="htmlOutput" readonly></textarea>
        </div>
    </div>

    <script>
        // Sync color inputs
        document.getElementById('frontBgColorPicker').addEventListener('input', (e) => {
            document.getElementById('frontBgColor').value = e.target.value;
            updatePreview();
        });

        document.getElementById('frontBgColor').addEventListener('input', (e) => {
            document.getElementById('frontBgColorPicker').value = e.target.value;
            updatePreview();
        });

        document.getElementById('backBgColorPicker').addEventListener('input', (e) => {
            document.getElementById('backBgColor').value = e.target.value;
            updatePreview();
        });

        document.getElementById('backBgColor').addEventListener('input', (e) => {
            document.getElementById('backBgColorPicker').value = e.target.value;
            updatePreview();
        });

        // Update preview on input changes
        const inputs = document.querySelectorAll('input, textarea, select');
        inputs.forEach(input => {
            input.addEventListener('input', updatePreview);
        });

        function updatePreview() {
            const cardClass = document.getElementById('cardClass').value.trim();
            const logoUrl = document.getElementById('logoUrl').value.trim();
            const subtitle = document.getElementById('subtitle').value.trim();
            const title = document.getElementById('title').value.trim();
            const frontBgImage = document.getElementById('frontBgImage').value.trim();
            const frontBgColor = document.getElementById('frontBgColor').value.trim();
            const bannerUrl = document.getElementById('bannerUrl').value.trim();
            const bannerAlt = document.getElementById('bannerAlt').value.trim();
            const description = document.getElementById('description').value;
            const callToAction = document.getElementById('callToAction').value.trim();
            const backBgColor = document.getElementById('backBgColor').value.trim();
            
            // Get toggle button URLs
            const toggleSummary = document.getElementById('toggleSummary').value.trim();
            const toggleCompete = document.getElementById('toggleCompete').value.trim();
            const toggleXsell = document.getElementById('toggleXsell').value.trim();
            const toggleUpsell = document.getElementById('toggleUpsell').value.trim();
            const toggleStory = document.getElementById('toggleStory').value.trim();
            const toggleLove = document.getElementById('toggleLove').value.trim();
            const toggleWatch = document.getElementById('toggleWatch').value.trim();
            
            // Get content to determine which toggles to show
            const videoUrl = document.getElementById('videoUrl').value.trim();

            // Validate URLs
            const isValidUrl = (url) => {
                if (!url) return true; // Empty is valid (optional)
                return url.startsWith('http://') || url.startsWith('https://') ||
                       url.startsWith('/') || url.startsWith('./') || url.startsWith('../') ||
                       !url.includes('://'); // Relative paths
            };

            // Show validation errors
            const validateField = (fieldId, isValid, message) => {
                const field = document.getElementById(fieldId);
                if (!isValid) {
                    field.style.borderColor = '#ff6b6b';
                    field.title = message;
                } else {
                    field.style.borderColor = '#223041';
                    field.title = '';
                }
            };

            validateField('logoUrl', isValidUrl(logoUrl), 'Please enter a valid URL or path');
            validateField('frontBgImage', isValidUrl(frontBgImage), 'Please enter a valid URL or path');
            validateField('bannerUrl', isValidUrl(bannerUrl), 'Please enter a valid URL or path');
            validateField('title', title.length > 0, 'Title is required');

            // Update preview card
            const previewCard = document.getElementById('previewCard');
            const previewFront = document.getElementById('previewFront');
            const previewBack = document.getElementById('previewBack');
            const previewLogo = document.getElementById('previewLogo');
            const previewSubtitle = document.getElementById('previewSubtitle');
            const previewTitle = document.getElementById('previewTitle');
            const previewBanner = document.getElementById('previewBanner');
            const previewDescription = document.getElementById('previewDescription');

            // Update front face
            previewLogo.src = logoUrl || 'images/grok-n-talk-logo.png';
            previewSubtitle.textContent = subtitle;
            previewSubtitle.style.display = subtitle ? 'inline' : 'none';
            
            const titleHtml = subtitle ? `<small id="previewSubtitle">${subtitle}</small><br/>${title}` : title;
            previewTitle.innerHTML = titleHtml;

            previewFront.style.backgroundColor = frontBgColor;
            if (frontBgImage) {
                previewFront.style.backgroundImage = `url(${frontBgImage})`;
            } else {
                previewFront.style.backgroundImage = 'none';
            }

            // Update back face
            previewBanner.src = bannerUrl || 'images/grok-n-talk-banner.png';
            previewBanner.alt = bannerAlt;
            
            // Build description with optional call-to-action
            let descriptionHtml = description || '<ul><li>No description provided</li></ul>';
            if (callToAction) {
                // Insert CTA before closing </ul> tag if it exists
                if (descriptionHtml.includes('</ul>')) {
                    descriptionHtml = descriptionHtml.replace('</ul>', `    <li><span class="emphasize">${callToAction}<br/> &#8594; <a href="#" id="gimmeMoreLink">Gimme More &#63;'s</a></span></li>\n</ul>`);
                } else {
                    descriptionHtml += `\n<li><span class="emphasize">${callToAction}<br/> &#8594; <a href="#" id="gimmeMoreLink">Gimme More &#63;'s</a></span></li>`;
                }
            }
            
            try {
                previewDescription.innerHTML = descriptionHtml;
            } catch (e) {
                console.error('Error setting description HTML:', e);
                previewDescription.innerHTML = '<ul><li>Error displaying description</li></ul>';
            }
            
            // Ensure description is visible
            previewDescription.style.display = 'block';
            
            // Add click handler for "Gimme More ?'s" link
            const gimmeMoreLink = document.getElementById('gimmeMoreLink');
            if (gimmeMoreLink) {
                gimmeMoreLink.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const questionsSection = document.getElementById('previewQuestions');
                    const description = document.getElementById('previewDescription');
                    
                    // Remove active class from all toggle containers
                    document.querySelectorAll('#previewBack .summary-toggle, #previewBack .compete-toggle, #previewBack .x-toggle, #previewBack .upsell-toggle, #previewBack .story-toggle, #previewBack .call-toggle').forEach(toggleDiv => {
                        toggleDiv.classList.remove('active');
                    });
                    
                    // Hide all content sections
                    document.querySelectorAll('#previewBack .summary, #previewBack .competitors, #previewBack .x-sell, #previewBack .upsell, #previewBack .questions, #previewBack .story, #previewBack .talk, #previewBack .tv').forEach(section => {
                        section.style.display = 'none';
                    });
                    
                    // Show questions section
                    description.style.display = 'none';
                    questionsSection.style.display = 'block';
                };
            }
            
            previewBack.style.backgroundColor = backBgColor;

            // Update toggle buttons in preview with click handlers
            const toggles = [
                { id: 'previewToggleSummary', contentId: 'previewSummary', url: toggleSummary, alt: 'Summary', title: 'Show Summary' },
                { id: 'previewToggleCompete', contentId: 'previewCompetitors', url: toggleCompete, alt: 'Competitors', title: 'Show Competitors' },
                { id: 'previewToggleXsell', contentId: 'previewXsell', url: toggleXsell, alt: 'Cross-Sell', title: 'Show Cross-Sell' },
                { id: 'previewToggleUpsell', contentId: 'previewUpsell', url: toggleUpsell, alt: 'Upsell', title: 'Show Upsell' },
                { id: 'previewToggleStory', contentId: 'previewStory', url: toggleStory, alt: 'Stories', title: 'Show Stories' },
                { id: 'previewToggleLove', contentId: 'previewLove', url: toggleLove, alt: 'Customer Love', title: 'Show Customer Love' }
            ];

            toggles.forEach(toggle => {
                const container = document.getElementById(toggle.id);
                if (toggle.url) {
                    container.innerHTML = `<a href="#"><img class="toggle" src="${toggle.url}" alt="${toggle.alt}" title="${toggle.title}" /></a>`;
                    container.style.display = 'block';
                    
                    // Add click handler to toggle content visibility
                    const link = container.querySelector('a');
                    link.onclick = function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const contentSection = document.getElementById(toggle.contentId);
                        const description = document.getElementById('previewDescription');
                        
                        // Remove active class from all toggle containers
                        document.querySelectorAll('#previewBack .summary-toggle, #previewBack .compete-toggle, #previewBack .x-toggle, #previewBack .upsell-toggle, #previewBack .story-toggle, #previewBack .call-toggle').forEach(toggleDiv => {
                            toggleDiv.classList.remove('active');
                        });
                        
                        // Hide all content sections
                        document.querySelectorAll('#previewBack .summary, #previewBack .competitors, #previewBack .x-sell, #previewBack .upsell, #previewBack .questions, #previewBack .story, #previewBack .talk, #previewBack .tv').forEach(section => {
                            section.style.display = 'none';
                        });
                        
                        // Toggle between description and content section
                        if (contentSection.style.display === 'block') {
                            contentSection.style.display = 'none';
                            description.style.display = 'block';
                        } else {
                            description.style.display = 'none';
                            contentSection.style.display = 'block';
                            // Add active class to current toggle
                            container.classList.add('active');
                        }
                    };
                } else {
                    container.innerHTML = '';
                    container.style.display = 'none';
                }
            });
            
            // Always show watch toggle if icon is provided
            const watchContainer = document.getElementById('previewToggleWatch');
            if (toggleWatch) {
                watchContainer.innerHTML = `<a href="#"><img class="logo" src="${toggleWatch}" alt="Watch Explainer" title="Watch Explainer" /></a>`;
                watchContainer.style.display = 'block';
                
                // Add click handler for watch toggle
                const watchLink = watchContainer.querySelector('a');
                watchLink.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const tvSection = document.getElementById('previewTv');
                    const description = document.getElementById('previewDescription');
                    
                    // Hide all content sections
                    document.querySelectorAll('#previewBack .summary, #previewBack .competitors, #previewBack .x-sell, #previewBack .upsell, #previewBack .questions, #previewBack .story, #previewBack .talk, #previewBack .tv').forEach(section => {
                        section.style.display = 'none';
                    });
                    
                    // Toggle between description and TV section
                    if (tvSection.style.display === 'block') {
                        tvSection.style.display = 'none';
                        description.style.display = 'block';
                    } else {
                        description.style.display = 'none';
                        tvSection.style.display = 'block';
                    }
                };
            } else {
                watchContainer.innerHTML = '';
                watchContainer.style.display = 'none';
            }
            
            // Update content sections in preview
            // Build summary content from 4 ELI5 fields + CTA
            const eli5Assertion = document.getElementById('eli5Assertion').value.trim();
            const eli5PainPoint = document.getElementById('eli5PainPoint').value.trim();
            const eli5Value = document.getElementById('eli5Value').value.trim();
            const eli5Punchline = document.getElementById('eli5Punchline').value.trim();
            
            let summaryContent = '';
            if (eli5Assertion || eli5PainPoint || eli5Value || eli5Punchline || callToAction) {
                summaryContent = '<ul>\n';
                if (eli5Assertion) summaryContent += `    <li>${eli5Assertion}</li>\n`;
                if (eli5PainPoint) summaryContent += `    <li>${eli5PainPoint}</li>\n`;
                if (eli5Value) summaryContent += `    <li>${eli5Value}</li>\n`;
                if (eli5Punchline) summaryContent += `    <li>${eli5Punchline}</li>\n`;
                // Add CTA as 5th bullet in summary if it exists
                if (callToAction) {
                    summaryContent += `    <li><span class="emphasize">${callToAction}<br/> &#8594; <a href="#" class="summaryGimmeMoreLink">Gimme More &#63;'s</a></span></li>\n`;
                }
                summaryContent += '</ul>';
            }
            
            const competitorsContent = document.getElementById('competitorsContent').value.trim();
            const xsellContent = document.getElementById('xsellContent').value.trim();
            const upsellContent = document.getElementById('upsellContent').value.trim();
            const questionsContent = document.getElementById('questionsContent').value.trim();
            const storyContent = document.getElementById('storyContent').value.trim();
            const loveContent = document.getElementById('loveContent').value.trim();
            
            // Update each content section
            const previewSummary = document.getElementById('previewSummary');
            const previewCompetitors = document.getElementById('previewCompetitors');
            const previewXsell = document.getElementById('previewXsell');
            const previewUpsell = document.getElementById('previewUpsell');
            const previewQuestions = document.getElementById('previewQuestions');
            const previewStory = document.getElementById('previewStory');
            const previewLove = document.getElementById('previewLove');
            const previewTv = document.getElementById('previewTv');
            
            // Summary/ELI5 section
            if (summaryContent) {
                previewSummary.innerHTML = summaryContent;
                previewSummary.style.display = 'none'; // Hidden by default, shown by toggle
                
                // Add click handler for "Gimme More ?'s" link in summary
                setTimeout(() => {
                    const summaryGimmeMoreLink = previewSummary.querySelector('.summaryGimmeMoreLink');
                    if (summaryGimmeMoreLink) {
                        summaryGimmeMoreLink.onclick = function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            const questionsSection = document.getElementById('previewQuestions');
                            const summarySection = document.getElementById('previewSummary');
                            
                            // Remove active class from all toggle containers
                            document.querySelectorAll('#previewBack .summary-toggle, #previewBack .compete-toggle, #previewBack .x-toggle, #previewBack .upsell-toggle, #previewBack .story-toggle, #previewBack .call-toggle').forEach(toggleDiv => {
                                toggleDiv.classList.remove('active');
                            });
                            
                            // Hide all content sections
                            document.querySelectorAll('#previewBack .summary, #previewBack .competitors, #previewBack .x-sell, #previewBack .upsell, #previewBack .questions, #previewBack .story, #previewBack .talk, #previewBack .tv').forEach(section => {
                                section.style.display = 'none';
                            });
                            
                            // Show questions section
                            questionsSection.style.display = 'block';
                        };
                    }
                }, 0);
            } else {
                previewSummary.innerHTML = '';
                previewSummary.style.display = 'none';
            }
            
            // Competitors section
            if (competitorsContent) {
                previewCompetitors.innerHTML = competitorsContent;
                previewCompetitors.style.display = 'none';
            } else {
                previewCompetitors.innerHTML = '';
                previewCompetitors.style.display = 'none';
            }
            
            // Cross-sell section
            if (xsellContent) {
                previewXsell.innerHTML = xsellContent;
                previewXsell.style.display = 'none';
            } else {
                previewXsell.innerHTML = '';
                previewXsell.style.display = 'none';
            }
            
            // Upsell section
            if (upsellContent) {
                previewUpsell.innerHTML = upsellContent;
                previewUpsell.style.display = 'none';
            } else {
                previewUpsell.innerHTML = '';
                previewUpsell.style.display = 'none';
            }
            
            // Questions section
            if (questionsContent) {
                previewQuestions.innerHTML = questionsContent;
                previewQuestions.style.display = 'none';
            } else {
                previewQuestions.innerHTML = '';
                previewQuestions.style.display = 'none';
            }
            
            // Story section
            if (storyContent) {
                previewStory.innerHTML = storyContent;
                previewStory.style.display = 'none';
            } else {
                previewStory.innerHTML = '';
                previewStory.style.display = 'none';
            }
            
            // Love section
            if (loveContent) {
                previewLove.innerHTML = loveContent;
                previewLove.style.display = 'none';
            } else {
                previewLove.innerHTML = '';
                previewLove.style.display = 'none';
            }
            
            // TV/Video section
            if (videoUrl) {
                previewTv.innerHTML = `<iframe width="100%" height="50%" src="${videoUrl}" title="Explainer Video" webkitallowfullscreen frameborder="0" style="position:absolute; top:25%; left: 0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>`;
                previewTv.style.display = 'none';
            } else {
                previewTv.innerHTML = '';
                previewTv.style.display = 'none';
            }
            
            // Reset view to show description and hide all content sections
            // This ensures the preview always shows the description after updates
            document.querySelectorAll('#previewBack .summary, #previewBack .competitors, #previewBack .x-sell, #previewBack .upsell, #previewBack .questions, #previewBack .story, #previewBack .talk, #previewBack .tv').forEach(section => {
                section.style.display = 'none';
            });
            
            // Remove active class from all toggles
            document.querySelectorAll('#previewBack .summary-toggle, #previewBack .compete-toggle, #previewBack .x-toggle, #previewBack .upsell-toggle, #previewBack .story-toggle, #previewBack .call-toggle').forEach(toggleDiv => {
                toggleDiv.classList.remove('active');
            });
            
            // Ensure description is visible
            if (previewDescription) {
                previewDescription.style.display = 'block';
            }
        }

        function generateHTML() {
            // Validate required fields
            const title = document.getElementById('title').value.trim();
            if (!title) {
                alert('‚ö†Ô∏è Title is required!');
                document.getElementById('title').focus();
                return;
            }

            const cardClass = document.getElementById('cardClass').value.trim() || 'custom-card';
            const logoUrl = document.getElementById('logoUrl').value.trim() || 'images/grok-n-talk-logo.png';
            const subtitle = document.getElementById('subtitle').value.trim();
            const frontBgImage = document.getElementById('frontBgImage').value.trim();
            const frontBgColor = document.getElementById('frontBgColor').value.trim() || '#101010';
            const bannerUrl = document.getElementById('bannerUrl').value.trim() || 'images/grok-n-talk-banner.png';
            const bannerAlt = document.getElementById('bannerAlt').value.trim() || 'Product';
            const description = document.getElementById('description').value;
            const callToAction = document.getElementById('callToAction').value.trim();
            const backBgColor = document.getElementById('backBgColor').value.trim() || '#003566';
            
            // Get toggle button URLs
            const toggleSummary = document.getElementById('toggleSummary').value.trim();
            const toggleCompete = document.getElementById('toggleCompete').value.trim();
            const toggleXsell = document.getElementById('toggleXsell').value.trim();
            const toggleUpsell = document.getElementById('toggleUpsell').value.trim();
            const toggleStory = document.getElementById('toggleStory').value.trim();
            const toggleLove = document.getElementById('toggleLove').value.trim();
            const toggleWatch = document.getElementById('toggleWatch').value.trim();
            const videoUrl = document.getElementById('videoUrl').value.trim();
            
            // Get content section data
            // Build summary content from 4 ELI5 fields (CTA will be added separately in the generated HTML)
            const eli5Assertion = document.getElementById('eli5Assertion').value.trim();
            const eli5PainPoint = document.getElementById('eli5PainPoint').value.trim();
            const eli5Value = document.getElementById('eli5Value').value.trim();
            const eli5Punchline = document.getElementById('eli5Punchline').value.trim();
            
            let summaryContent = '';
            if (eli5Assertion || eli5PainPoint || eli5Value || eli5Punchline) {
                summaryContent = '<ul>\n';
                if (eli5Assertion) summaryContent += `    <li>${eli5Assertion}</li>\n`;
                if (eli5PainPoint) summaryContent += `    <li>${eli5PainPoint}</li>\n`;
                if (eli5Value) summaryContent += `    <li>${eli5Value}</li>\n`;
                if (eli5Punchline) summaryContent += `    <li>${eli5Punchline}</li>\n`;
                summaryContent += '</ul>';
            }
            
            const competitorsContent = document.getElementById('competitorsContent').value.trim();
            const xsellContent = document.getElementById('xsellContent').value.trim();
            const upsellContent = document.getElementById('upsellContent').value.trim();
            const questionsContent = document.getElementById('questionsContent').value.trim();
            const storyContent = document.getElementById('storyContent').value.trim();
            const loveContent = document.getElementById('loveContent').value.trim();

            // Validate CSS class name
            if (!/^[a-zA-Z][\w-]*$/.test(cardClass)) {
                alert('‚ö†Ô∏è Card class name must start with a letter and contain only letters, numbers, hyphens, and underscores.');
                document.getElementById('cardClass').focus();
                return;
            }

            // Generate title HTML
            const titleHtml = subtitle 
                ? `<h2><small>${subtitle}</small><br/>${title}</h2>`
                : `<h2>${title}</h2>`;

            // Generate style attribute for front face
            let frontStyle = `background-color: ${frontBgColor};`;
            if (frontBgImage) {
                frontStyle += ` background-image: url(${frontBgImage}); background-size: 100%; background-position: 50% 50%; background-repeat: no-repeat;`;
            }

            // Generate toggle buttons HTML with fixed positioning
            let toggleButtonsHtml = '';
            const togglePositions = [5, 55, 105, 160, 215, 270];
            const toggles = [
                { url: toggleSummary, id: 'summary', className: 'summary-toggle', left: togglePositions[0], alt: 'Show Summary', title: 'Show Summary' },
                { url: toggleCompete, id: 'compete', className: 'compete-toggle', left: togglePositions[1], alt: 'Show Competitors', title: 'Show Competitors' },
                { url: toggleXsell, id: 'x-sell', className: 'x-toggle', left: togglePositions[2], alt: 'Show X-Sell', title: 'Show Cross-Sell' },
                { url: toggleUpsell, id: 'upsell', className: 'upsell-toggle', left: togglePositions[3], alt: 'Show Upsell', title: 'Show Upsell' },
                { url: toggleStory, id: 'story', className: 'story-toggle', left: togglePositions[4], alt: 'Show Stories', title: 'Show Stories' },
                { url: toggleLove, id: 'love', className: 'call-toggle', left: togglePositions[5], alt: 'Show Love', title: 'Show Customer Love' }
            ];

            const activeToggles = toggles.filter(t => t.url);
            
            if (activeToggles.length > 0) {
                toggleButtonsHtml = '\n        <!-- Toggle Buttons -->';
                activeToggles.forEach((toggle) => {
                    toggleButtonsHtml += `\n        <div class="${toggle.className}" id="${toggle.id}" style="position: fixed; bottom: 15px; left: ${toggle.left}px;">
            <a href="#"><img class="toggle" src="${toggle.url}" alt="${toggle.alt}" title="${toggle.title}" /></a>
        </div>`;
                });
            }
            
            // Add watch toggle if video URL and icon are provided
            if (videoUrl && toggleWatch) {
                toggleButtonsHtml += `\n        <div class="watch-toggle" id="tv-${cardClass}" style="position: absolute; bottom: 0px; right: 5px;">
            <a href="#"><img class="logo" src="${toggleWatch}" alt="Watch Explainer" title="Watch Explainer" /></a>
        </div>`;
            }

            // Build description with optional call-to-action
            let finalDescription = description;
            if (callToAction) {
                // Check if description ends with </ul> to add inside list, otherwise add as new paragraph
                if (description.trim().endsWith('</ul>')) {
                    finalDescription = description.trim().slice(0, -5) +
                        `    <li><span class="emphasize">${callToAction}<br/>&#8594; <a href="#">Gimme More &#63;'s</a></span></li>\n</ul>`;
                } else {
                    finalDescription = description +
                        `\n<p><span class="emphasize">${callToAction}<br/>&#8594; <a href="#">Gimme More &#63;'s</a></span></p>`;
                }
            }

            // Generate content sections HTML
            let contentSectionsHtml = '';
            
            // Summary/ELI5 section
            if (summaryContent) {
                contentSectionsHtml += `\n        <div class="summary" id="${cardClass}-summary">
${summaryContent}
        </div>`;
            }
            
            // Competitors section
            if (competitorsContent) {
                contentSectionsHtml += `\n        <div class="competitors" id="${cardClass}-competitors">
${competitorsContent}
        </div>`;
            }
            
            // Cross-sell section
            if (xsellContent) {
                contentSectionsHtml += `\n        <div class="x-sell" id="${cardClass}-xsell">
${xsellContent}
        </div>`;
            }
            
            // Upsell section
            if (upsellContent) {
                contentSectionsHtml += `\n        <div class="upsell" id="${cardClass}-upsell">
${upsellContent}
        </div>`;
            }
            
            // Questions section
            if (questionsContent) {
                contentSectionsHtml += `\n        <div class="questions" id="${cardClass}-questions">
${questionsContent}
        </div>`;
            }
            
            // Story section
            if (storyContent) {
                contentSectionsHtml += `\n        <div class="story" id="${cardClass}-story">
${storyContent}
        </div>`;
            }
            
            // Talk/Love section
            if (loveContent) {
                contentSectionsHtml += `\n        <div class="talk" id="${cardClass}-love">
${loveContent}
        </div>`;
            }
            
            // TV/Video section
            if (videoUrl) {
                contentSectionsHtml += `\n        <div class="tv" id="${cardClass}-tv">
            <iframe width="100%" height="50%" src="${videoUrl}" title="Explainer Video" webkitallowfullscreen frameborder="0" style="position:absolute; top:25%; left: 0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        </div>`;
            }

            // Generate HTML
            const html = `<!-- ${cardClass} Card -->
<div class="card ${cardClass}">
    <div class="face front" style="${frontStyle}">
        <img class="logo" src="${logoUrl}" alt="Logo" />
        ${titleHtml}
    </div>
    <div class="face back" style="background-color: ${backBgColor};">
        <img src="${bannerUrl}" alt="${bannerAlt}" style="height:10%" />
        <div class="description">
${finalDescription}
        </div>${contentSectionsHtml}${toggleButtonsHtml}
    </div>
</div>`;

            document.getElementById('htmlOutput').value = html;
        }

        function copyToClipboard() {
            const output = document.getElementById('htmlOutput');
            
            if (!output.value) {
                alert('‚ö†Ô∏è Please generate HTML first!');
                return;
            }

            output.select();
            
            // Try modern clipboard API first, fallback to execCommand
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(output.value).then(() => {
                    showSuccessMessage();
                }).catch(() => {
                    // Fallback to execCommand
                    document.execCommand('copy');
                    showSuccessMessage();
                });
            } else {
                document.execCommand('copy');
                showSuccessMessage();
            }
        }

        function showSuccessMessage() {
            const successMsg = document.getElementById('successMessage');
            successMsg.style.display = 'block';
            setTimeout(() => {
                successMsg.style.display = 'none';
            }, 3000);
        }

        function resetForm() {
            document.getElementById('cardClass').value = 'custom-card';
            document.getElementById('logoUrl').value = 'images/grok-n-talk-logo.png';
            document.getElementById('subtitle').value = 'IBM';
            document.getElementById('title').value = 'Custom Product';
            document.getElementById('frontBgImage').value = '';
            document.getElementById('frontBgColor').value = '#101010';
            document.getElementById('frontBgColorPicker').value = '#101010';
            document.getElementById('bannerUrl').value = 'images/grok-n-talk-banner.png';
            document.getElementById('bannerAlt').value = 'Custom Product';
            document.getElementById('description').value = `<ul>
    <li>Key feature or benefit 1</li>
    <li>Key feature or benefit 2</li>
    <li>Key feature or benefit 3</li>
</ul>`;
            document.getElementById('callToAction').value = 'What questions do you have about this product?';
            document.getElementById('backBgColor').value = '#003566';
            document.getElementById('backBgColorPicker').value = '#003566';
            document.getElementById('toggleSummary').value = 'images/list-eli5.png';
            document.getElementById('toggleCompete').value = 'images/list-compete.png';
            document.getElementById('toggleXsell').value = 'images/list-cross-sell.png';
            document.getElementById('toggleUpsell').value = 'images/list-upsell.png';
            document.getElementById('toggleStory').value = 'images/list-story.png';
            document.getElementById('toggleLove').value = 'images/list-love.png';
            document.getElementById('toggleWatch').value = 'images/empty-tv.png';
            document.getElementById('eli5Assertion').value = '';
            document.getElementById('eli5PainPoint').value = '';
            document.getElementById('eli5Value').value = '';
            document.getElementById('eli5Punchline').value = '';
            document.getElementById('eli5Question').value = '';
            document.getElementById('competitorsContent').value = '';
            document.getElementById('xsellContent').value = '';
            document.getElementById('upsellContent').value = '';
            document.getElementById('questionsContent').value = '';
            document.getElementById('storyContent').value = '';
            document.getElementById('loveContent').value = '';
            document.getElementById('videoUrl').value = '';
            document.getElementById('htmlOutput').value = '';
            updatePreview();
        }

        function loadExampleCard() {
            // Load Turbonomic card data as example
            document.getElementById('cardClass').value = 'turbo';
            document.getElementById('logoUrl').value = 'images/grok-n-talk-logo.png';
            document.getElementById('subtitle').value = 'IBM';
            document.getElementById('title').value = 'Turbonomic';
            document.getElementById('frontBgImage').value = '';
            document.getElementById('frontBgColor').value = '#101010';
            document.getElementById('frontBgColorPicker').value = '#101010';
            document.getElementById('bannerUrl').value = 'images/grok-n-talk-banner.png';
            document.getElementById('bannerAlt').value = 'IBM Turbonomic';
            
            // Description
            document.getElementById('description').value = `<ul>
    <li>Applications need resources to function. Stuff like compute, memory, storage, networking.</li>
    <li>Applications eat resources in different ways that change all the time, making it hard to find the right size and creating waste</li>
    <li>Changing resources automatically to the right amount, at the right time, to feed application hunger can lower overall computer costs and waste</li>
    <li><a href="https://ibm.seismic.com/Link/Content/DCJ2bCQ7FPH448fJ6TWjVcmc2MJ3" target="_blank" rel="noopener">Turbonomic</a> watches apps constantly and tunes their resources automatically to keep performance continously steady and waste low</li>
</ul>`;
            
            document.getElementById('callToAction').value = 'How are you currently using technology to be better with resource efficiency and waste in your environments? ‚ûî Gimme More ?\'s';
            document.getElementById('backBgColor').value = '#003566';
            document.getElementById('backBgColorPicker').value = '#003566';
            
            // Toggle icons (keep defaults)
            document.getElementById('toggleSummary').value = 'images/list-eli5.png';
            document.getElementById('toggleCompete').value = 'images/list-compete.png';
            document.getElementById('toggleXsell').value = 'images/list-cross-sell.png';
            document.getElementById('toggleUpsell').value = 'images/list-upsell.png';
            document.getElementById('toggleStory').value = 'images/list-story.png';
            document.getElementById('toggleLove').value = 'images/list-love.png';
            document.getElementById('toggleWatch').value = 'images/turbo-tv.png';
            
            // ELI5 Summary content (matches description exactly)
            document.getElementById('eli5Assertion').value = 'Applications need resources to function. Stuff like compute, memory, storage, networking.';
            document.getElementById('eli5PainPoint').value = 'Applications eat resources in different ways that change all the time, making it hard to find the right size and creating waste';
            document.getElementById('eli5Value').value = 'Changing resources automatically to the right amount, at the right time, to feed application hunger can lower overall computer costs and waste';
            document.getElementById('eli5Punchline').value = '<a href="https://ibm.seismic.com/Link/Content/DCJ2bCQ7FPH448fJ6TWjVcmc2MJ3" target="_blank" rel="noopener">Turbonomic</a> watches apps constantly and tunes their resources automatically to keep performance continously steady and waste low';
            document.getElementById('eli5Question').value = ''; // Leave empty - CTA will be used instead
            
            // Competitors content
            document.getElementById('competitorsContent').value = `<h3 class="center"><a href="https://ibm.seismic.com/Link/Content/DCCmhM8Ggj6QXGFM4m87HMB2gBPB" target="_blank" rel="noopener">WATCH OUT -- LISTEN FOR</a></h3>
<ul>
    <li class="nospace"><span class="emphasize">Dynatrace</span> - <small>Observability platform</small></li>
    <li class="nospace"><span class="emphasize">Datadog</span> - <small>Cloud monitoring & observability platform</small></li>
    <li class="nospace"><span class="emphasize">VMware Aria</span> - <small>Cloud management platform</small></li>
    <li class="nospace"><span class="emphasize">New Relic</span> - <small>Full stack observability</small></li>
    <li class="nospace"><span class="emphasize">AppDynamics</span> - <small>Full stack Application Performance Monitoring</small></li>
    <li class="nospace"><span class="emphasize">Densify</span> - <small>Hybrid cloud & container resource management platform</small></li>
    <li class="nospace"><span class="emphasize">Intel Granulate</span> - <small>Kubernetes/Container resource management platform</small></li>
    <li class="nospace"><span class="emphasize">Azure Advisor</span> - <small>Cloud Tool</small></li>
    <li class="nospace"><span class="emphasize">Azure Cost Analysis</span> - <small>Cloud Tool</small></li>
    <li class="nospace"><span class="emphasize">Azure Budgets</span> - <small>Cloud Tool</small></li>
    <li class="nospace"><span class="emphasize">AWS Cost Explorer</span> - <small>Cloud Tool</small></li>
    <li class="nospace"><span class="emphasize">AWS Cost Optimization Hub</span> - <small>Cloud Tool</small></li>
    <li class="nospace"><span class="emphasize">AWS Cost Optimizer</span> - <small>Cloud Tool</small></li>
    <li class="nospace"><span class="emphasize">Google Cloud Recommender</span> - <small>Cloud Tool</small></li>
</ul>`;
            
            // Cross-sell content
            document.getElementById('xsellContent').value = `<h3 class="center" style="font-weight:bold;color:#B3D0F5">ONE + ONE = THREE</h3>
<ul>
    <li><span class="emphasize">TURBO BUYERS</span> <span style="color:red">&#10084;</span> <span style="color:#B3D0F5">CloudPak for Integration</span><br/>Why? &#8594; No Automation without Integration. Customer interest in cost saving measures opens door for hearing about how CP4I can consolidate IT tools and bring efficient approaches to integration.</li>
    <li><span class="emphasize">TURBO BUYERS</span> <span style="color:red">&#10084;</span> <a href="https://ibm.seismic.com/Link/Content/DCjgmQT4cPXCdGfJRbVQ6cfFgc2V" target="_blank" rel="noopener">Instana</a><br/>Why? &#8594; Without good data and context, teams cannot confidently automate at scale. Instana gives real-time data with all the context. No gaps. No blind spots. 1 second granularity</li>
    <li><span class="emphasize">TURBO BUYERS</span> <span style="color:red">&#10084;</span> <a href="https://ibm.seismic.com/Link/Content/DCPQJMjWfB9mJ8cFbQj43P43VHQj" target="_blank" rel="noopener">IBM Envizi ESG Suite</a><br/>Why? &#8594; Turbo reduces carbon impact through optimization. Customer interest in optimization opens door for conversations on sustainability and ESG goals. Green IT. Responsible computing, efficient energy and decarbonization</li>
</ul>`;
            
            // Upsell content
            document.getElementById('upsellContent').value = `<h3 class="center" style="font-weight:bold;color:#B3D0F5">MAKE IT A COMBO MEAL</h3>
<ul>
    <li><span class="emphasize">TURBO BUYERS</span> <span style="color:red">&#10084;</span> <a href="https://ibm.seismic.com/Link/Content/DCMMfQPq8M9fX87J8gJM73hBgGh8" target="_blank" rel="noopener">Cloudability</a><br/>Why? &#8594; With both, they can upgrade their FinOps game to cover all cloud costs and resources. Perfect for customers looking for BOTH FinOps capabilities and comprehensive hybrid cloud optimization to address broader performance and cost efficiency challenges</li>
    <li><span class="emphasize">TURBO BUYERS</span> <span style="color:red">&#10084;</span> <span style="color:#B3D0F5">Kubecost</span><br/>Why? &#8594; Insight into costs is a natural combo for customer's focused on optimization. Combine Kubecost's best-in-class Kubernetes costing and impact estimates with Turbo's automated, actionable optimization functionality.</li>
    <li><span class="emphasize" style="font-size:small">TURBO EXISTING ON-PREM</span> <span style="color:red">&#10084;</span> <span style="color:#B3D0F5;font-size:small">TURBO HOSTING</span><br/>Why? &#8594; For a fixed price, convert undeployed Turbo licenses to SaaS. Help customers wanting/mandated to move to SaaS. Customer satisfaction now to get future recurring SaaS</li>
</ul>`;
            
            // Questions content
            document.getElementById('questionsContent').value = `<ul class="emphasize nospace">
    <li>How important is it to continuously assure the performance of your applications?</li>
    <li>Do you sometimes buy a little extra? Pad your infrastructure?</li>
    <li>What if software could watch everything in real-time and make decisions?</li>
</ul>`;
            
            // Story content
            document.getElementById('storyContent').value = `<h3 class="center" style="font-weight:bold;color:#B3D0F5">A GOOD STORY NEEDS<br/>ONLY A GOOD STORYTELLER<br/><small>~Richard Bausch~</small></h3>
<ul>
    <li><span><a href="https://www.ibm.com/case-studies/rabobank-ibm-turbonomic" target="_blank" rel="noopener">Rabobank</a><br/><span class="emphasize">VMWare Cost Takeout</span><br/>Sell Turbo to reduce VMware license costs and hardware refresh costs</span></li>
    <li><span><a href="https://www.ibm.com/case-studies/ibm-big-ai-models-turbonomic" target="_blank" rel="noopener">IBM Big AI Models Team</a><br/><span class="emphasize">GPU Optimization</span><br/>Sell Turbo to maximize GPU performance and avoid waste for AI/ML and graphics heavy workloads</span></li>
    <li><span><a href="https://community.ibm.com/community/user/aiops/blogs/veeramani-nambi1/2022/12/13/case-study" target="_blank" rel="noopener">BlueIT</a><br/><span class="emphasize">Turbonomic + Instana</span><br/>Using both to keep apps running with good performance while cutting carbon emissions</span></li>
</ul>`;
            
            // Customer love content
            document.getElementById('loveContent').value = `<h3 class="center" style="font-weight:bold;color:#B3D0F5">CUSTOMER LOVE <span style="color:red">&#10084;</span><br/>LET ME COUNT THE WAYS</h3>
<ol>
    <li class="nospace">Want to automate and optimize application resources dynamically at scale because of changing market demands</li>
    <li class="nospace">Have "interest in" or "have established" a <span class="emphasize">FinOps</span> practice</li>
    <li class="nospace">Hate their <span class="emphasize">VMWare licensing cost</span> increases</li>
    <li class="nospace">Dislike their ever-increasing Cloud spend</li>
    <li class="nospace">Struggle with maintaining good application performance in a cost-effective way</li>
    <li class="nospace">Need to buy Automation solutions with a FAST ROI because of tight budgets</li>
    <li class="nospace">Need to transition from use of Turbonomic on-premise to SaaS cost-effectively</li>
    <li class="nospace">Need to buy via the AWS Marketplace to leverage their <a href="https://beetok.ied.dal.app.cirrus.ibm.com/#/play/UnderstandingAndLeveragingHyperscalerCommittedSpendToProgressSalesOpportunities-joshisa@us.ibm.com" target="_blank" rel="noopener">committed spend money</a></li>
</ol>`;
            
            // Video URL
            document.getElementById('videoUrl').value = 'https://www.youtube.com/embed/SWWbjv5QXUk?si=83KundRgMMyVO6rB';
            
            updatePreview();
        }

        // Setup preview card flip handler
        document.getElementById('previewCard').addEventListener('click', function(e) {
            // Don't flip if clicking on a link, button, or toggle
            if (e.target.tagName === 'A' ||
                e.target.tagName === 'BUTTON' ||
                e.target.tagName === 'IMG' ||
                e.target.closest('a') ||
                e.target.closest('.toggle-buttons')) {
                return;
            }
            this.classList.toggle('flip');
        });

        // ========================================
        // HTML Editor Enhancement Functions
        // ========================================
        
        const editors = {};
        
        // Initialize CodeMirror for all content textareas
        function initializeEditors() {
            const textareaIds = [
                'competitorsContent',
                'xsellContent',
                'upsellContent',
                'questionsContent',
                'storyContent',
                'loveContent'
            ];
            
            textareaIds.forEach(id => {
                const textarea = document.getElementById(id);
                if (textarea && !editors[id]) {
                    const editor = CodeMirror.fromTextArea(textarea, {
                        mode: 'htmlmixed',
                        lineNumbers: true,
                        lineWrapping: true,
                        autoCloseTags: true,
                        matchTags: { bothTags: true },
                        theme: 'default',
                        indentUnit: 4,
                        tabSize: 4,
                        indentWithTabs: false
                    });
                    
                    // Sync changes back to textarea and trigger preview update
                    editor.on('change', () => {
                        textarea.value = editor.getValue();
                        updatePreview();
                    });
                    
                    editors[id] = editor;
                }
            });
        }
        
        // Get editor instance or fallback to textarea
        function getEditor(textareaId) {
            return editors[textareaId] || null;
        }
        
        // Insert tag at cursor position
        function insertTag(textareaId, tag, cursorOffset) {
            const editor = getEditor(textareaId);
            if (editor) {
                const doc = editor.getDoc();
                const cursor = doc.getCursor();
                doc.replaceRange(tag, cursor);
                // Move cursor to position inside tag
                doc.setCursor({
                    line: cursor.line,
                    ch: cursor.ch + cursorOffset
                });
                editor.focus();
            } else {
                // Fallback for textarea
                const textarea = document.getElementById(textareaId);
                const start = textarea.selectionStart;
                const end = textarea.selectionEnd;
                const text = textarea.value;
                textarea.value = text.substring(0, start) + tag + text.substring(end);
                textarea.selectionStart = textarea.selectionEnd = start + cursorOffset;
                textarea.focus();
                updatePreview();
            }
        }
        
        // Wrap selection with tags
        function wrapSelection(textareaId, before, after) {
            const editor = getEditor(textareaId);
            if (editor) {
                const doc = editor.getDoc();
                const selection = doc.getSelection();
                if (selection) {
                    doc.replaceSelection(before + selection + after);
                } else {
                    const cursor = doc.getCursor();
                    doc.replaceRange(before + after, cursor);
                    doc.setCursor({
                        line: cursor.line,
                        ch: cursor.ch + before.length
                    });
                }
                editor.focus();
            } else {
                // Fallback for textarea
                const textarea = document.getElementById(textareaId);
                const start = textarea.selectionStart;
                const end = textarea.selectionEnd;
                const text = textarea.value;
                const selection = text.substring(start, end);
                textarea.value = text.substring(0, start) + before + selection + after + text.substring(end);
                textarea.selectionStart = start + before.length;
                textarea.selectionEnd = start + before.length + selection.length;
                textarea.focus();
                updatePreview();
            }
        }
        
        // Insert link with prompt
        function insertLink(textareaId) {
            const url = prompt('Enter URL:', 'https://');
            if (url) {
                const linkTag = `<a href="${url}" target="_blank" rel="noopener"></a>`;
                const editor = getEditor(textareaId);
                if (editor) {
                    const doc = editor.getDoc();
                    const selection = doc.getSelection();
                    if (selection) {
                        doc.replaceSelection(`<a href="${url}" target="_blank" rel="noopener">${selection}</a>`);
                    } else {
                        const cursor = doc.getCursor();
                        doc.replaceRange(linkTag, cursor);
                        doc.setCursor({
                            line: cursor.line,
                            ch: cursor.ch + linkTag.length - 4
                        });
                    }
                    editor.focus();
                } else {
                    // Fallback for textarea
                    const textarea = document.getElementById(textareaId);
                    const start = textarea.selectionStart;
                    const end = textarea.selectionEnd;
                    const text = textarea.value;
                    const selection = text.substring(start, end);
                    if (selection) {
                        textarea.value = text.substring(0, start) + `<a href="${url}" target="_blank" rel="noopener">${selection}</a>` + text.substring(end);
                    } else {
                        textarea.value = text.substring(0, start) + linkTag + text.substring(end);
                        textarea.selectionStart = textarea.selectionEnd = start + linkTag.length - 4;
                    }
                    textarea.focus();
                    updatePreview();
                }
            }
        }
        
        // Format HTML with beautification
        function formatHTML(textareaId) {
            const editor = getEditor(textareaId);
            if (editor) {
                const html = editor.getValue();
                try {
                    const formatted = html_beautify(html, {
                        indent_size: 4,
                        indent_char: ' ',
                        max_preserve_newlines: 2,
                        preserve_newlines: true,
                        wrap_line_length: 0,
                        indent_inner_html: true,
                        unformatted: [],
                        content_unformatted: ['pre', 'textarea'],
                        extra_liners: []
                    });
                    editor.setValue(formatted);
                    showValidationMessage(textareaId, 'HTML formatted successfully!', 'success');
                } catch (e) {
                    showValidationMessage(textareaId, 'Error formatting HTML: ' + e.message, 'error');
                }
            } else {
                // Fallback for textarea
                const textarea = document.getElementById(textareaId);
                try {
                    const formatted = html_beautify(textarea.value, {
                        indent_size: 4,
                        indent_char: ' ',
                        max_preserve_newlines: 2,
                        preserve_newlines: true
                    });
                    textarea.value = formatted;
                    showValidationMessage(textareaId, 'HTML formatted successfully!', 'success');
                    updatePreview();
                } catch (e) {
                    showValidationMessage(textareaId, 'Error formatting HTML: ' + e.message, 'error');
                }
            }
        }
        
        // Validate HTML
        function validateHTML(textareaId) {
            const editor = getEditor(textareaId);
            const html = editor ? editor.getValue() : document.getElementById(textareaId).value;
            
            if (!html.trim()) {
                showValidationMessage(textareaId, 'No content to validate', 'error');
                return;
            }
            
            try {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const parserErrors = doc.querySelectorAll('parsererror');
                
                if (parserErrors.length > 0) {
                    showValidationMessage(textareaId, 'HTML has syntax errors', 'error');
                    return;
                }
                
                // Check for common issues
                const errors = [];
                
                // Check for unclosed tags (basic check)
                const openTags = html.match(/<(\w+)[^>]*>/g) || [];
                const closeTags = html.match(/<\/(\w+)>/g) || [];
                
                // Check for required attributes
                const links = doc.querySelectorAll('a');
                links.forEach((link, i) => {
                    if (!link.getAttribute('href')) {
                        errors.push(`Link ${i + 1} missing href attribute`);
                    }
                });
                
                if (errors.length > 0) {
                    showValidationMessage(textareaId, errors.join('; '), 'error');
                } else {
                    showValidationMessage(textareaId, '‚úì HTML is valid!', 'success');
                }
            } catch (e) {
                showValidationMessage(textareaId, 'Validation error: ' + e.message, 'error');
            }
        }
        
        // Show validation message
        function showValidationMessage(textareaId, message, type) {
            const msgElement = document.getElementById('validation-' + textareaId);
            if (msgElement) {
                msgElement.textContent = message;
                msgElement.className = 'validation-message ' + type;
                msgElement.style.display = 'block';
                
                // Auto-hide success messages after 3 seconds
                if (type === 'success') {
                    setTimeout(() => {
                        msgElement.style.display = 'none';
                    }, 3000);
                }
            }
        }
        
        // Initialize editors when page loads
        window.addEventListener('load', () => {
            // Small delay to ensure CodeMirror is fully loaded
            setTimeout(initializeEditors, 100);
        });

        // Initialize preview on page load
        updatePreview();
    </script>
</body>
</html>